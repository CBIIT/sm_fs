<app-can-search-modal></app-can-search-modal>

<div class="row">
  <div class="col-12 d-flex">
    <h2>Budget Information</h2>
    <a class="collapse-toggle btn btn-link ml-auto" data-toggle="collapse" href="#budget-info-collapse-ro"
       role="button"
       aria-expanded="true" aria-controls="budget-info-collapse-ro"></a>
  </div>
  <div class="col-12 collapse show mt-2" id="budget-info-collapse-ro">
    <h4>Add CAN Number(s):</h4>
    <table class="table table-striped table-bordered budget-info-table">
      <thead>
      <tr>
        <th scope="col">Funding Source</th>
        <th scope="col">OEFIA Coding</th>
        <th scope="col">CAN Action(s)</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let source of planModel.fundingPlanDto.fpFinancialInformation.fundingPlanFundsSources; let i = index">
        <td>{{ source.fundingSourceName }}</td>
        <td>
          <app-oefia-types [fseId]="source.fundingSourceId" [index]="i" [selectedValue]="source.octId"></app-oefia-types>
        </td>
        <td>
          <div class="d-flex align-items-center">
            <button
              *ngIf="true"
              (click)="copyProjectedCAN(source.fundingSourceId)"
              class="btn btn-link btn-slim"
              ngbTooltip="Copy NCI OEFIA Projected CAN">
              <i class="far fa-copy" aria-hidden="true"></i>
            </button>
            <button
              *ngIf="true"
              (click)="searchForCANs(source.nciSourceFlag)"
              class="btn btn-link btn-slim"
              ngbTooltip="Search NCI OEFIA Projected CAN">
              <i class="far fa-air-freshener" aria-hidden="true"></i>
            </button>
            <button
              *ngIf="true"
              (click)="deleteSelectedCAN(source.fundingSourceId)"
              class="btn btn-link btn-slim"
              ngbTooltip="Delete NCI OEFIA Projected CAN">
              <i class="far fa-trash" aria-hidden="true"></i>
            </button>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
<div class="row">
  <div class="col-12 collapse show mt-2" id="budget-info-collapse-rx">
    <table class="table table-striped table-bordered budget-info-table">
      <thead>
      <tr>
        <th scope="col">Grant Number</th>
        <th scope="col">Funding Source</th>
        <th scope="col">Approved Direct Cost</th>
        <th scope="col">Approved Total Cost</th>
        <th scope="col">NCI OEFIA Projected CAN</th>
        <th scope="col">Funds Approver Provided CAN Information</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let grant of listGrantsSelected; let grantIndex = index">
        <td>
          <app-full-grant-number-cell-renderer
            [data]="grant"
            [eGrantsUrl]="planModel.eGrantsUrl"
            [grantViewerUrl]="planModel.grantViewerUrl">
          </app-full-grant-number-cell-renderer>
        </td>
        <td>
          <app-funding-source-renderer [grant]="grant"></app-funding-source-renderer>
        </td>
        <td>
          <app-grant-cost-renderer mode="approvedDirect" [grant]="grant"></app-grant-cost-renderer>
        </td>
        <td>
          <app-grant-cost-renderer mode="approvedTotal" [grant]="grant"></app-grant-cost-renderer>
        </td>
        <td>
          <app-projected-can-renderer
            [projectedCans]="projectedCans"
            [projectedApplIdCans]="projectedApplIdCans"
            [grant]="grant">
          </app-projected-can-renderer>
        </td>
        <td>
          <app-can-selector-renderer
            [projectedCans]="projectedCans"
            [projectedApplIdCans]="projectedApplIdCans"
            [grant]="grant">
          </app-can-selector-renderer>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
